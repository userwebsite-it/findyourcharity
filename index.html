<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Find Your Charity</title>
<meta name="description" content="Independent, nonprofit directory—find charities and donate on their official sites.">
<style>
:root{--primary:#1E4D8B;--primary-dark:#153E75;--text:#0f172a;--bg:#E6EFFA;--muted:#6b7280;--line:#e5e7eb}
*{box-sizing:border-box}html,body{margin:0;padding:0}
body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:#fff}
.container{width:min(1200px,94%);margin:0 auto}
.header{position:sticky;top:0;z-index:10;background:#fff;border-bottom:1px solid var(--line)}
.header .bar{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
.brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--text);font-weight:800}
.brand .logo{width:28px;height:28px;border-radius:8px;background:var(--primary);display:inline-block}
.nav a,.nav button{margin-left:12px;color:#0f172a;text-decoration:none;opacity:.9;border:1px solid var(--line);background:#fff;border-radius:999px;padding:8px 12px;cursor:pointer}
.nav a:hover,.nav button:hover{opacity:1}
.hero{background:linear-gradient(180deg,var(--bg),#fff)}
.hero .inner{display:grid;grid-template-columns:1.2fr 1fr;gap:28px;align-items:center;padding:56px 0}
h1{margin:0 0 10px;font-size:clamp(2rem,4vw,3rem);line-height:1.1;color:var(--primary)}
.lead{margin:0;color:#334155}.sub{color:#64748b}
.searchbar{display:flex;gap:8px;align-items:stretch;margin-top:16px}
.searchbar input{flex:1;padding:12px 14px;border-radius:12px;border:1px solid var(--line);background:#fff}
.iconbtn{width:46px;height:46px;border-radius:12px;border:1px solid var(--line);background:var(--primary);color:#fff;display:grid;place-items:center;cursor:pointer}
.pills{display:flex;gap:8px;margin-top:14px;flex-wrap:wrap}
.pill{background:#fff;border:1px solid var(--line);color:#111827;padding:8px 12px;border-radius:999px;text-decoration:none;font-weight:600;cursor:pointer}
.section{padding:32px 0}
.cards{display:grid;grid-template-columns:repeat(6,1fr);gap:12px}
@media (max-width:1100px){.cards{grid-template-columns:repeat(4,1fr)}}
@media (max-width:700px){.cards{grid-template-columns:repeat(2,1fr)}}
.card{background:#fff;border:1px solid var(--line);border-radius:14px;padding:12px;text-align:center;box-shadow:0 1px 0 0 rgba(0,0,0,.03)}
.card img{width:56px;height:56px;object-fit:contain;border-radius:8px;background:#fff}
.card .name{font-weight:700;font-size:.95rem;margin-top:6px}
.layout{display:grid;grid-template-columns:280px 1fr;gap:18px;padding:24px 0}
@media (max-width:900px){.layout{grid-template-columns:1fr}}
.sidebar{background:#fff;border:1px solid var(--line);border-radius:14px;padding:14px;height:max-content}
.input,.select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--line);background:#fff;margin-top:8px}
.check{display:flex;align-items:center;gap:8px;margin-top:8px;color:#334155}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
@media (max-width:1000px){.grid{grid-template-columns:repeat(2,1fr)}}
@media (max-width:640px){.grid{grid-template-columns:1fr}}
.item{background:#fff;border:1px solid var(--line);border-radius:14px;padding:12px;display:flex;gap:12px;align-items:flex-start;box-shadow:0 1px 0 0 rgba(0,0,0,.03)}
.item img.thumb{width:64px;height:64px;object-fit:contain;border-radius:10px;background:#fff}
.meta{color:#6b7280;font-size:.9rem}
.actions{display:flex;gap:8px;margin-top:6px}
.btn{display:inline-block;padding:8px 12px;border:1px solid var(--line);border-radius:10px;text-decoration:none;color:#111;background:#fff;cursor:pointer}
.btn.primary{background:var(--primary);border-color:var(--primary);color:#fff}
.footer{border-top:1px solid var(--line);color:#6b7280}
.footer .inner{padding:20px 0 40px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:8px}
.notice{font-size:.85rem;color:#64748b}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:16px}
.modal .box{background:#fff;border-radius:14px;max-width:640px;width:100%;padding:16px;border:1px solid var(--line)}
</style>
</head>
<body>
<header class="header">
  <div class="container bar">
    <a class="brand" href="#"><span class="logo" aria-hidden="true"></span><span>Find Your Charity</span></a>
    <nav class="nav">
      <a href="#" id="browseAll">Browse All</a>
      <button id="jump">Find Your Charity</button>
    </nav>
  </div>
</header>

<main id="app">
  <!-- HOME -->
  <section class="hero" id="home">
    <div class="container inner">
      <div>
        <h1>Find charities. Give directly.</h1>
        <p class="lead">Independent, nonprofit directory helping you explore and give with confidence.</p>
        <p class="sub">We link you straight to each charity’s official website. No fees. No cuts.</p>
        <form id="homeSearch" class="searchbar" role="search">
          <input id="searchInput" type="search" placeholder="Search by charity name…">
          <button class="iconbtn" aria-label="Search" title="Search">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="22" height="22" fill="#fff"><path d="M10.5 3a7.5 7.5 0 015.93 12.2l4.14 4.14-1.42 1.42-4.14-4.14A7.5 7.5 0 1110.5 3zm0 2a5.5 5.5 0 100 11 5.5 5.5 0 000-11z"/></svg>
          </button>
        </form>
        <div class="pills" id="pillwrap" style="margin-top:14px;"></div>
      </div>
      <div>
        <div class="section">
          <h3>Popular this week</h3>
          <div class="cards" id="feat"></div>
          <p class="notice" style="margin-top:8px">Logos come from public brand endpoints; placeholders use a neutral badge where needed.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- BROWSE -->
  <section class="container section" id="browse" style="display:none">
    <div class="layout">
      <aside class="sidebar">
        <h3 class="side-title">Filter</h3>
        <form id="searchForm"><input id="q" class="input" placeholder="Search within results…"></form>
        <label class="check"><input type="checkbox" id="ver"> Verified only</label>
        <select id="size" class="select"><option value="">Size (any)</option><option>Small</option><option>Medium</option><option>Large</option></select>
        <input id="loc" class="input" placeholder="Location (e.g. USA)">
        <div style="margin-top:8px;color:#64748b;font-size:.9rem">Showing <span id="count">0</span> results</div>
      </aside>
      <section>
        <h1 id="catTitle" style="margin:0 0 8px;"></h1>
        <div id="results" class="grid" aria-live="polite"></div>
        <div id="pag" style="display:flex;gap:8px;margin:16px 0;"></div>
      </section>
    </div>
  </section>
</main>

<footer class="footer">
  <div class="container inner"><small>© <span id="year"></span> Find Your Charity — independent, nonprofit directory. Ratings are summaries, not endorsements.</small></div>
</footer>

<!-- Rating Modal -->
<div class="modal" id="ratingModal" aria-hidden="true">
  <div class="box">
    <h2 id="mName" style="margin:0 0 6px"></h2>
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
      <img id="mLogo" alt="" style="width:48px;height:48px;object-fit:contain;border-radius:8px;background:#fff">
      <strong id="mScore"></strong><span>/10</span>
    </div>
    <p id="mExp"></p>
    <p><a id="mSite" class="btn primary" href="#" target="_blank" rel="noopener">Visit official site</a></p>
    <div style="display:flex;justify-content:flex-end;gap:8px"><button class="btn" id="closeModal">Close</button></div>
  </div>
</div>

<script>
/* ========= CONFIG ========= */
const CATEGORIES = [
 "Animals & Wildlife","Arts, Culture & Humanities","Children & Youth","Civil Rights & Social Justice",
 "Community Development","Disaster Relief & Emergency Services","Disease Research & Treatment",
 "Domestic Violence & Abuse Prevention","Education & Schools","Employment & Job Training",
 "Environmental & Conservation","Faith-Based & Religious Organizations","Food Security & Hunger Relief",
 "Health & Medical Services","Homelessness Services & Housing","Human Services & Poverty Alleviation",
 "International Aid & Development","LGBTQ+ Support & Advocacy","Mental Health & Counseling",
 "Military & Veterans Support","Public Policy, Law & Advocacy","Science & Technology Initiatives",
 "Sports & Recreation Nonprofits"
];
const PAGE_SIZE = 24;
const RNG_SEED = 941212;
const REGIONS = ["USA","Canada","UK","EU","Global","Latin America","Africa","Asia-Pacific","Middle East","Australia"];
const SIZES = ["Small","Medium","Large"];
const WORDS = ["Alliance","Network","Foundation","Institute","Project","Trust","Partners","Coalition","Initiative","Society","Center","Council"];
const qs=(s,el=document)=>el.querySelector(s), qsa=(s,el=document)=>Array.from(el.querySelectorAll(s));
function rand(){ let x = rand._x = (rand._x ?? RNG_SEED) ^ 0x6a09e667; x ^= x << 13; x ^= x >> 17; x ^= x << 5; rand._x = x|0; return (x>>>0)/4294967295; }
function slug(s){return (s||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");}
function logo(domain){return `https://logo.clearbit.com/${domain}`;}
// Neutral inline SVG image (always present) so EVERY item has a picture
const NEUTRAL_IMG = 'data:image/svg+xml;utf8,'
  + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">'
    + '<rect width="64" height="64" rx="12" fill="#1E4D8B"/>'
    + '<circle cx="28" cy="28" r="12" fill="#fff"/>'
    + '<rect x="36" y="36" width="16" height="8" rx="4" fill="#153E75"/></svg>');
function fallback(img){ img.onerror=()=>{ img.src=NEUTRAL_IMG; }; img.loading='lazy'; img.decoding='async';}
function ratingExplanation(name, cat, score){
  const tiers = score>=9? "recognized for exemplary performance" :
                score>=7.5? "recognized for strong performance" :
                score>=6.5? "shows consistent delivery with opportunities to strengthen" :
                            "actively serving its mission while building capacity";
  const notes = [
    "transparent reporting and audited financials",
    "effective use of program funds relative to overhead",
    "publicly shared outcomes aligned with its mission",
    "clear leadership accountability and board oversight",
    "evidence of collaborative community partnerships"
  ];
  const a = notes[Math.floor(rand()*notes.length)], b = notes[Math.floor(rand()*notes.length)];
  return `${name} is ${tiers} in the ${cat} category, based on ${a} and ${b}. This summary is respectful and informational; please review the charity’s own reports.`;
}

/* Seed real organizations (verified:true, correct official sites & logos) */
const SEEDS = [
  ["ASPCA","aspca.org","Animals & Wildlife","Prevents cruelty to animals.","USA","Large"],
  ["Humane Society of the United States","humanesociety.org","Animals & Wildlife","Ending suffering for all animals.","USA","Large"],
  ["Best Friends Animal Society","bestfriends.org","Animals & Wildlife","No-kill movement for pets.","USA","Medium"],
  ["World Wildlife Fund","worldwildlife.org","Environmental & Conservation","Protecting wildlife and wild places.","Global","Large"],
  ["The Nature Conservancy","nature.org","Environmental & Conservation","Conserving lands and waters.","Global","Large"],
  ["Environmental Defense Fund","edf.org","Environmental & Conservation","Tackling climate and pollution.","Global","Large"],
  ["Feeding America","feedingamerica.org","Food Security & Hunger Relief","Network of food banks.","USA","Large"],
  ["World Central Kitchen","wck.org","Food Security & Hunger Relief","Meals in crises.","Global","Large"],
  ["World Food Program USA","wfpusa.org","Food Security & Hunger Relief","Supports UN WFP.","Global","Large"],
  ["American Red Cross","redcross.org","Disaster Relief & Emergency Services","Disaster relief & blood services.","USA/Global","Large"],
  ["Direct Relief","directrelief.org","Disaster Relief & Emergency Services","Medical aid after disasters.","Global","Large"],
  ["Doctors Without Borders (MSF)","doctorswithoutborders.org","Health & Medical Services","Medical humanitarian assistance.","Global","Large"],
  ["St. Jude Children’s Research Hospital","stjude.org","Disease Research & Treatment","Pediatric treatment & research.","USA","Large"],
  ["American Cancer Society","cancer.org","Disease Research & Treatment","Cancer research & support.","USA","Large"],
  ["American Heart Association","heart.org","Health & Medical Services","Cardiovascular health programs.","USA","Large"],
  ["Alzheimer’s Association","alz.org","Health & Medical Services","Support & research on Alzheimer's.","USA","Large"],
  ["Khan Academy","khanacademy.org","Education & Schools","Free world-class education.","Global","Large"],
  ["DonorsChoose","donorschoose.org","Education & Schools","Classroom project funding.","USA","Medium"],
  ["Teach For America","teachforamerica.org","Education & Schools","Expanding educational opportunity.","USA","Large"],
  ["Code.org","code.org","Science & Technology Initiatives","Expanding access to CS education.","Global","Large"],
  ["Habitat for Humanity","habitat.org","Homelessness Services & Housing","Partnering to build homes.","Global","Large"],
  ["United Way","unitedway.org","Human Services & Poverty Alleviation","Community impact & services.","Global","Large"],
  ["Salvation Army USA","salvationarmyusa.org","Human Services & Poverty Alleviation","Social services & relief.","USA","Large"],
  ["International Rescue Committee","rescue.org","International Aid & Development","Assists people affected by conflict.","Global","Large"],
  ["Oxfam America","oxfamamerica.org","International Aid & Development","Ending the injustice of poverty.","Global","Large"],
  ["CARE","care.org","International Aid & Development","Humanitarian aid & development.","Global","Large"],
  ["Mercy Corps","mercycorps.org","International Aid & Development","Helps people build better lives.","Global","Large"],
  ["Charity: water","charitywater.org","International Aid & Development","Clean water to people in need.","Global","Medium"],
  ["Water.org","water.org","International Aid & Development","Water & sanitation solutions.","Global","Medium"],
  ["ACLU","aclu.org","Civil Rights & Social Justice","Defends civil liberties.","USA","Large"],
  ["NAACP","naacp.org","Civil Rights & Social Justice","Advances civil rights.","USA","Large"],
  ["Human Rights Watch","hrw.org","Public Policy, Law & Advocacy","Investigates and reports on abuses.","Global","Large"],
  ["Amnesty International USA","amnestyusa.org","Public Policy, Law & Advocacy","Human rights advocacy.","Global","Large"],
  ["The Trevor Project","thetrevorproject.org","LGBTQ+ Support & Advocacy","Crisis support for LGBTQ+ youth.","USA","Medium"],
  ["GLAAD","glaad.org","LGBTQ+ Support & Advocacy","LGBTQ+ acceptance & media.","USA","Medium"],
  ["NAMI","nami.org","Mental Health & Counseling","Support & advocacy for mental health.","USA","Large"],
  ["Mental Health America","mhanational.org","Mental Health & Counseling","Community-based mental health.","USA","Medium"],
  ["Sierra Club Foundation","sierraclub.org","Environmental & Conservation","Protecting the planet.","USA","Large"],
  ["Greenpeace","greenpeace.org","Environmental & Conservation","Environmental campaigns worldwide.","Global","Large"],
  ["Ocean Conservancy","oceanconservancy.org","Environmental & Conservation","Protecting the ocean.","Global","Medium"],
  ["Wounded Warrior Project","woundedwarriorproject.org","Military & Veterans Support","Veterans programs & support.","USA","Large"],
  ["Fisher House Foundation","fisherhouse.org","Military & Veterans Support","Comfort homes for military families.","USA","Medium"],
  ["Team Rubicon","teamrubiconusa.org","Disaster Relief & Emergency Services","Veterans serving in disasters.","Global","Medium"],
  ["Boys & Girls Clubs of America","bgca.org","Children & Youth","After-school & youth development.","USA","Large"],
  ["YMCA USA","ymca.org","Sports & Recreation Nonprofits","Youth development & healthy living.","USA","Large"]
];

/* Build full dataset = 23 categories × 100 items */
function buildDataset(){
  const dataset = {}; for(const cat of CATEGORIES) dataset[cat] = [];
  // verified seeds
  for(const [name,domain,cat,blurb,loc,size] of SEEDS){
    const score = +(6 + rand()*3.8).toFixed(1);
    dataset[cat].push({
      id:`${slug(name)}-${slug(cat)}`, name, website:`https://${domain}`, category:cat,
      blurb, location: loc, size, verified:true, image: logo(domain),
      rating: score, rating_explanation: ratingExplanation(name, cat, score)
    });
  }
  // unverified placeholders (now with neutral image + web search link, NOT Charity Navigator)
  for(const cat of CATEGORIES){
    while(dataset[cat].length < 100){
      const nm = `${cat.split("&")[0].trim()} ${WORDS[Math.floor(rand()*WORDS.length)]} ${Math.floor(1+rand()*9999)}`;
      const id = `${slug(nm)}-${slug(cat)}`;
      const loc = REGIONS[Math.floor(rand()*REGIONS.length)];
      const size = SIZES[Math.floor(rand()*SIZES.length)];
      const score = +(6 + rand()*3.8).toFixed(1);
      const searchQ = encodeURIComponent(nm + " " + cat + " nonprofit official site");
      dataset[cat].push({
        id, name: nm, website:`https://www.google.com/search?q=${searchQ}`,
        category:cat,
        blurb:`Directory entry for ${cat.toLowerCase()} (unverified). Use the search link to find the official site and verify before donating.`,
        location: loc, size, verified:false,
        image: NEUTRAL_IMG, // every entry has a visible picture now
        rating: score, rating_explanation: ratingExplanation(nm, cat, score)
      });
    }
  }
  return dataset;
}

/* ===== UI wiring ===== */
const DATA = buildDataset();
const home = qs('#home'), browse = qs('#browse'), pillwrap = qs('#pillwrap'), feat = qs('#feat');
const catTitle = qs('#catTitle'), results = qs('#results'), countEl = qs('#count'), pag=qs('#pag');

document.getElementById('year').textContent = new Date().getFullYear();
qs('#jump').addEventListener('click', ()=>openCategory('Browse All'));
qs('#browseAll').addEventListener('click', (e)=>{e.preventDefault(); openCategory('Browse All');});
qs('#homeSearch').addEventListener('submit', e=>{
  e.preventDefault();
  const term=(qs('#searchInput').value||'').trim();
  openCategory('Browse All', term);
});

// category pills (23)
CATEGORIES.forEach(cat=>{
  const b=document.createElement('button'); b.className='pill'; b.textContent=cat;
  b.addEventListener('click',()=>openCategory(cat));
  pillwrap.appendChild(b);
});

// popular this week: 12 items
const allFlat = Object.values(DATA).flat();
const verified = allFlat.filter(x=>x.verified);
const pool = (verified.length>=12? verified : allFlat).sort(()=>rand()-0.5).slice(0,12);
pool.forEach(c=>{
  const a=document.createElement('a'); a.className='card'; a.href=c.website; a.target='_blank'; a.rel='noopener';
  a.innerHTML=`<img alt="${c.name} logo"><div class="name">${c.name}</div><div style="font-size:.85rem;color:#6b7280;margin-top:4px">${(c.rating??'—')}/10</div>`;
  feat.appendChild(a);
  const img=a.querySelector('img'); img.src=c.image || NEUTRAL_IMG; fallback(img);
});

function openCategory(cat, prefill=''){
  home.style.display='none'; browse.style.display='block';
  catTitle.textContent = (cat==='Browse All') ? 'Browse All' : cat;
  const base = (cat==='Browse All') ? allFlat : (DATA[cat]||[]);
  const q = qs('#q'), ver=qs('#ver'), size=qs('#size'), loc=qs('#loc');
  if(q) q.value=prefill;

  function apply(){
    const term=(q?.value||'').toLowerCase().trim();
    const sizeVal=(size?.value||'').toLowerCase();
    const verOnly=!!(ver?.checked);
    const locVal=(loc?.value||'').toLowerCase();

    const view = base.filter(c=>{
      const t=!term||(c.name+' '+(c.blurb||'')).toLowerCase().includes(term);
      const s=!sizeVal||(c.size||'').toLowerCase()===sizeVal;
      const v=!verOnly||!!c.verified;
      const l=!locVal||(c.location||'').toLowerCase().includes(locVal);
      return t&&s&&v&&l;
    });
    render(1, view);
  }

  function render(page, view){
    results.innerHTML='';
    const start=(page-1)*PAGE_SIZE;
    view.slice(start,start+PAGE_SIZE).forEach(c=>{
      const d=document.createElement('div'); d.className='item';
      d.innerHTML=`
        <img class="thumb" alt="${c.name} logo">
        <div style="flex:1">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;">
            <h3 style="margin:0">${c.name}${c.verified?'':' <span style="font-weight:600;color:#b45309;font-size:.85rem">(Unverified)</span>'}</h3>
            <div class="rating" style="font-weight:700">${(c.rating??'—')}/10</div>
          </div>
          <div class="meta">${c.category} · ${c.location||'—'} · ${c.size||'—'}</div>
          <p style="margin:.4rem 0 0">${c.blurb||''}</p>
          <div class="actions">
            <button class="btn" data-rate="${c.id}">Why this rating?</button>
            <a class="btn primary" href="${c.website}" target="_blank" rel="noopener">${c.verified?'Official site':'Search & verify'}</a>
          </div>
        </div>`;
      results.appendChild(d);
      const img=d.querySelector('img.thumb'); img.src=c.image||NEUTRAL_IMG; fallback(img);
    });
    if(countEl) countEl.textContent=String(view.length);
    // pagination
    pag.innerHTML='';
    const pages=Math.max(1,Math.ceil(view.length/PAGE_SIZE));
    for(let i=1;i<=pages;i++){
      const b=document.createElement('button'); b.className='btn'; b.textContent=i;
      if(i===page){ b.style.background='#1E4D8B'; b.style.color='#fff'; }
      b.addEventListener('click',()=>render(i,view));
      pag.appendChild(b);
    }
    // rating buttons
    results.querySelectorAll('[data-rate]').forEach(b=>{
      b.addEventListener('click',()=>{
        const id=b.getAttribute('data-rate'); const found=base.find(x=>x.id===id);
        if(found) openRating(found);
      });
    });
  }

  qsa('#browse input, #browse select').forEach(el=>el.addEventListener('input',apply));
  apply();
}

// Rating modal
const modal=qs('#ratingModal'), mName=qs('#mName'), mLogo=qs('#mLogo'), mScore=qs('#mScore'), mExp=qs('#mExp'), mSite=qs('#mSite');
qs('#closeModal').addEventListener('click',()=>{ modal.style.display='none'; modal.setAttribute('aria-hidden','true'); });
function openRating(c){
  mName.textContent=c.name;
  mLogo.src=c.image||NEUTRAL_IMG; fallback(mLogo);
  mScore.textContent=(c.rating??'—');
  mExp.textContent=c.rating_explanation||'';
  mSite.href=c.website;
  modal.style.display='flex'; modal.setAttribute('aria-hidden','false');
}

document.getElementById('year').textContent = new Date().getFullYear();
</script>
</body>
</html>
